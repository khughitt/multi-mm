---
title: Multiple Myeloma Dataset Comparison
author: V. Keith Hughitt
date: "`r format(Sys.time(), '%d %B, %Y') `"
output:
  html_document:
    toc: true
    number_sections: true
---

# Setup

```{r settings}
# analysis version
VERSION <- '2019-07-29'

# minimum and maximum number of genes required for gene set to be included in analysis
GENE_SET_MIN_SIZE <- 5
GENE_SET_MAX_SIZE <- 10000

# minimum p-value to allow for -log10 score computation
MIN_PVAL <- 1E-10

# function to use when aggregating data along pathways
PATHWAY_AGG_FUNC <- 'mean'

# maximum number of threads to use
MAX_THREADS <- 4

# fgsea parameters
FGSEA_NPERM <- 15000
```

```{r child='rmd/setup.Rmd'}
```

```{r rmarkdown_settings, include = FALSE}
# stop on encountered an error in a child rmd file
opts_chunk$set(error = FALSE)
opts_knit$set(verbose = TRUE)
```

# Overview

Summary of datasets included in this analysis:

```{r child='rmd/dataset_summary.Rmd'}
```

# Methods

```{r child='rmd/load_gene_sets.Rmd'}
```

```{r child='rmd/load_geo_genes.Rmd'}
```

```{r child='rmd/load_geo_pathways.Rmd'}
```

```{r child='rmd/load_mmrf_genes.Rmd'}
```

```{r child='rmd/load_mmrf_pathways.Rmd'}
```

```{r child='rmd/combine_gene_weights.Rmd'}
```

```{r child='rmd/combine_pathway_weights.Rmd'}
```

```{r child='rmd/create_custom_gene_sets.Rmd'}
```

# Results

```{r child='rmd/results_overview.Rmd'}
```

```{r child='rmd/results_dataset_similarity.Rmd'}
```

```{r child='rmd/results_functional_enrichment.Rmd'}
```

```{r child='rmd/results_gene_scores.Rmd'}
```

# System information

```{r, collapse=FALSE}
sessionInfo()
```

```{r git_commit}
system('git rev-parse --short HEAD', intern = TRUE)
```

```{r save_html, include=FALSE}
system(sprintf('(sleep 15 && cp README.html %s) &', output_dir))
```

